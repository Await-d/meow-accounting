exports.id=2634,exports.ids=[2634],exports.modules={27661:(e,a,s)=>{Promise.resolve().then(s.bind(s,70366))},54052:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(97075).Z)("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},70366:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(95344);s(3729);var r=s(8428),i=s(56506),n=s(56686),l=s(2273),o=s(89895),c=s(54052),d=s(99046),u=s(37121),m=s(23485),h=s(13746),f=s(91529);let g=[{name:"系统设置",href:"/settings/system",icon:t.jsx(l.Z,{size:20})},{name:"用户管理",href:"/settings/users",icon:t.jsx(o.Z,{size:20})},{name:"家庭管理",href:"/settings/family",icon:t.jsx(c.Z,{size:20})},{name:"分类管理",href:"/settings/category",icon:t.jsx(d.Z,{size:20})},{name:"系统日志",href:"/settings/logs",icon:t.jsx(u.Z,{size:20})},{name:"备份恢复",href:"/settings/backup",icon:t.jsx(m.Z,{size:20})}];function x({children:e}){let a=(0,r.usePathname)();return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-default-100",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)(n.w,{className:"w-64 h-fit p-2 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 mb-2",children:[t.jsx(f.E.div,{animate:{rotate:[0,15,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:t.jsx(h.Z,{size:24,className:"text-primary"})}),t.jsx("h2",{className:"text-xl font-bold",children:"后台管理"})]}),t.jsx("nav",{children:g.map(e=>{let s=a===e.href;return(0,t.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${s?"bg-primary text-white":"hover:bg-default-100"}`,children:[e.icon,t.jsx("span",{children:e.name})]},e.href)})})]}),t.jsx(n.w,{className:"flex-1 p-6",children:e})]})})})}},16512:(e,a,s)=>{"use strict";s.d(a,{Z:()=>J});var t=s(95344),r=s(3729),i=s(80089),n=s(84924),l=(0,s(5835).tv)({slots:{base:["relative","inline-flex","shrink-0"],badge:["flex","z-10","flex-wrap","absolute","box-border","rounded-full","whitespace-nowrap","place-content-center","origin-center","items-center","text-inherit","select-none","font-regular","scale-100","opacity-100","subpixel-antialiased","data-[invisible=true]:scale-0","data-[invisible=true]:opacity-0"]},variants:{variant:{solid:{},flat:{},faded:{badge:"border-medium"},shadow:{}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{badge:"px-1 text-tiny"},md:{badge:"px-1 text-small"},lg:{badge:"px-1 text-small"}},placement:{"top-right":{},"top-left":{},"bottom-right":{},"bottom-left":{}},shape:{circle:{},rectangle:{}},isInvisible:{true:{}},isOneChar:{true:{badge:"px-0"}},isDot:{true:{}},disableAnimation:{true:{badge:"transition-none"},false:{badge:"transition-transform-opacity !ease-soft-spring !duration-300"}},showOutline:{true:{badge:"border-2 border-background"},false:{badge:"border-transparent border-0"}}},defaultVariants:{variant:"solid",color:"default",size:"md",shape:"rectangle",placement:"top-right",showOutline:!0,isInvisible:!1},compoundVariants:[{variant:"solid",color:"default",class:{badge:n.J.solid.default}},{variant:"solid",color:"primary",class:{badge:n.J.solid.primary}},{variant:"solid",color:"secondary",class:{badge:n.J.solid.secondary}},{variant:"solid",color:"success",class:{badge:n.J.solid.success}},{variant:"solid",color:"warning",class:{badge:n.J.solid.warning}},{variant:"solid",color:"danger",class:{badge:n.J.solid.danger}},{variant:"shadow",color:"default",class:{badge:n.J.shadow.default}},{variant:"shadow",color:"primary",class:{badge:n.J.shadow.primary}},{variant:"shadow",color:"secondary",class:{badge:n.J.shadow.secondary}},{variant:"shadow",color:"success",class:{badge:n.J.shadow.success}},{variant:"shadow",color:"warning",class:{badge:n.J.shadow.warning}},{variant:"shadow",color:"danger",class:{badge:n.J.shadow.danger}},{variant:"flat",color:"default",class:{badge:n.J.flat.default}},{variant:"flat",color:"primary",class:{badge:n.J.flat.primary}},{variant:"flat",color:"secondary",class:{badge:n.J.flat.secondary}},{variant:"flat",color:"success",class:{badge:n.J.flat.success}},{variant:"flat",color:"warning",class:{badge:n.J.flat.warning}},{variant:"flat",color:"danger",class:{badge:n.J.flat.danger}},{variant:"faded",color:"default",class:{badge:n.J.faded.default}},{variant:"faded",color:"primary",class:{badge:n.J.faded.primary}},{variant:"faded",color:"secondary",class:{badge:n.J.faded.secondary}},{variant:"faded",color:"success",class:{badge:n.J.faded.success}},{variant:"faded",color:"warning",class:{badge:n.J.faded.warning}},{variant:"faded",color:"danger",class:{badge:n.J.faded.danger}},{isOneChar:!0,size:"sm",class:{badge:"w-4 h-4 min-w-4 min-h-4"}},{isOneChar:!0,size:"md",class:{badge:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,size:"lg",class:{badge:"w-6 h-6 min-w-6 min-h-6"}},{isDot:!0,size:"sm",class:{badge:"w-3 h-3 min-w-3 min-h-3"}},{isDot:!0,size:"md",class:{badge:"w-3.5 h-3.5 min-w-3.5 min-h-3.5"}},{isDot:!0,size:"lg",class:{badge:"w-4 h-4 min-w-4 min-h-4"}},{placement:"top-right",shape:"rectangle",class:{badge:"top-[5%] right-[5%] translate-x-1/2 -translate-y-1/2"}},{placement:"top-left",shape:"rectangle",class:{badge:"top-[5%] left-[5%] -translate-x-1/2 -translate-y-1/2"}},{placement:"bottom-right",shape:"rectangle",class:{badge:"bottom-[5%] right-[5%] translate-x-1/2 translate-y-1/2"}},{placement:"bottom-left",shape:"rectangle",class:{badge:"bottom-[5%] left-[5%] -translate-x-1/2 translate-y-1/2"}},{placement:"top-right",shape:"circle",class:{badge:"top-[10%] right-[10%] translate-x-1/2 -translate-y-1/2"}},{placement:"top-left",shape:"circle",class:{badge:"top-[10%] left-[10%] -translate-x-1/2 -translate-y-1/2"}},{placement:"bottom-right",shape:"circle",class:{badge:"bottom-[10%] right-[10%] translate-x-1/2 translate-y-1/2"}},{placement:"bottom-left",shape:"circle",class:{badge:"bottom-[10%] left-[10%] -translate-x-1/2 translate-y-1/2"}}]}),o=s(5809),c=s(36279),d=s(90386),u=s(91990),m=(0,c.Gp)((e,a)=>{let{Component:s,children:i,content:n,slots:m,classNames:h,getBadgeProps:f}=function(e){var a,s;let t=(0,o.w)(),i=null!=(s=null!=(a=null==e?void 0:e.disableAnimation)?a:null==t?void 0:t.disableAnimation)&&s,[n,m]=(0,c.oe)(e,l.variantKeys),{as:h,children:f,className:g,content:x,classNames:y,...b}=n,v=(0,r.useMemo)(()=>{var a;return(null==(a=String(x))?void 0:a.length)===1||(null==e?void 0:e.isOneChar)},[x,null==e?void 0:e.isOneChar]),p=(0,r.useMemo)(()=>{var e;return(null==(e=String(x))?void 0:e.length)===0},[x]),w=(0,d.W)(null==y?void 0:y.badge,g),j=(0,r.useMemo)(()=>l({...m,showOutline:(null==e?void 0:e.disableOutline)?!(null==e?void 0:e.disableOutline):null==e?void 0:e.showOutline,isOneChar:v,isDot:p}),[(0,u.Xx)(m),v,p]);return{Component:h||"span",children:f,content:x,slots:j,classNames:y,disableAnimation:i,isInvisible:null==e?void 0:e.isInvisible,getBadgeProps:()=>({className:j.badge({class:w}),"data-invisible":e.isInvisible,...b})}}({...e});return(0,t.jsxs)("div",{className:m.base({class:null==h?void 0:h.base}),children:[i,(0,t.jsx)(s,{ref:a,...f(),children:n})]})});m.displayName="NextUI.Badge";var h=s(75019),f=s(44738),g=s(56686),x=s(40237),y=s(98400),b=s(20516),v=s(61387),p=s(3394),w=s(52914),j=s(1629);let N=r.forwardRef(function({title:e,titleId:a,...s},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}),z=r.forwardRef(function({title:e,titleId:a,...s},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))});var $=s(3594),k=s(72416),I=s(89023);function J({invitations:e,type:a,onAccept:s,onReject:n,onDelete:l}){let{showToast:o}=(0,I.useToast)(),[c,d]=(0,r.useState)(null),u=e=>{let a=`${window.location.origin}/invite/${e}`;navigator.clipboard.writeText(a).then(()=>{o("邀请链接已复制到剪贴板","success")}).catch(()=>{o("复制失败，请手动复制","error")})},J=e=>new Date(e).toLocaleString(),E=e=>new Date(e)<new Date,_=e=>{let a=new Date,s=new Date(e).getTime()-a.getTime();if(s<=0)return"已过期";let t=Math.floor(s/864e5),r=Math.floor(s%864e5/36e5);return t>0?`${t}天${r}小时`:`${r}小时`},O=e=>{let{status:a,expires_at:s,max_uses:r,current_uses:n}=e;if("pending"===a&&E(s)||"expired"===a)return t.jsx(i.z,{color:"default",variant:"flat",size:"sm",children:"已过期"});switch(a){case"pending":if(r&&r>1){let e=r-(n||0);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{color:"warning",variant:"flat",size:"sm",children:"待处理"}),t.jsx(m,{content:`${e}/${r}`,color:"primary",size:"sm",children:t.jsx(h.e,{content:`最多可使用${r}次，已使用${n||0}次，剩余${e}次`,children:t.jsx(N,{className:"h-4 w-4 text-primary cursor-help"})})})]})}return t.jsx(i.z,{color:"warning",variant:"flat",size:"sm",children:"待处理"});case"accepted":if(r&&r>1){let e=r-(n||0);if(e>0)return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{color:"success",variant:"flat",size:"sm",children:"已接受"}),t.jsx(m,{content:`${e}/${r}`,color:"primary",size:"sm",children:t.jsx(h.e,{content:`最多可使用${r}次，已使用${n||0}次，还可使用${e}次`,children:t.jsx(N,{className:"h-4 w-4 text-primary cursor-help"})})})]});return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{color:"success",variant:"flat",size:"sm",children:"已接受"}),t.jsx(i.z,{color:"default",variant:"flat",size:"sm",children:"已用完"})]})}return t.jsx(i.z,{color:"success",variant:"flat",size:"sm",children:"已接受"});case"rejected":if(r&&r>1){let e=r-(n||0);if(e>0)return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{color:"danger",variant:"flat",size:"sm",children:"已拒绝"}),t.jsx(m,{content:`${e}/${r}`,color:"primary",size:"sm",children:t.jsx(h.e,{content:`最多可使用${r}次，已使用${n||0}次，还可使用${e}次`,children:t.jsx(N,{className:"h-4 w-4 text-primary cursor-help"})})})]});return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{color:"danger",variant:"flat",size:"sm",children:"已拒绝"}),t.jsx(i.z,{color:"default",variant:"flat",size:"sm",children:"已用完"})]})}return t.jsx(i.z,{color:"danger",variant:"flat",size:"sm",children:"已拒绝"});default:return null}},S=async(e,a)=>{if(s){d(a);try{await s(e)}finally{d(null)}}},L=async(e,a)=>{if(n){d(a);try{await n(e)}finally{d(null)}}},T=async e=>{if(l&&confirm("确定要删除此邀请吗？")){d(e);try{await l(e)}finally{d(null)}}},q=(0,r.useMemo)(()=>"sent"===a?[{key:"recipient",label:"接收者"},{key:"role",label:"角色"},{key:"status",label:"状态"},{key:"usage",label:"使用次数"},{key:"created_at",label:"创建时间"},{key:"expires_at",label:"有效期"},{key:"actions",label:"操作"}]:[{key:"family",label:"家庭"},{key:"creator",label:"邀请人"},{key:"role",label:"角色"},{key:"expires_at",label:"有效期"},{key:"actions",label:"操作"}],[a]),D=(e,s)=>{switch(console.log(`渲染单元格: ${s}`,e),s){case"recipient":return t.jsx("div",{className:"font-medium",children:e.is_generic||!e.email?t.jsx(i.z,{color:"secondary",variant:"flat",size:"sm",children:"通用邀请"}):e.email.replace(/(.{2})(.*)(@.*)/,"$1****$3")});case"family":return(0,t.jsxs)("div",{className:"font-medium",children:[e.family_name,e.is_generic&&t.jsx(i.z,{color:"secondary",variant:"flat",size:"sm",className:"ml-2",children:"通用邀请"})]});case"creator":return(0,t.jsxs)("div",{className:"text-default-500",children:[e.creator_name,e.max_uses&&e.max_uses>1&&(0,t.jsxs)("div",{className:"text-xs mt-1",children:["可使用",e.max_uses,"次，已使用",e.current_uses||0,"次"]})]});case"role":return t.jsx(i.z,{color:"admin"===e.role?"primary":"default",variant:"flat",size:"sm",children:"admin"===e.role?"管理员":"成员"});case"status":return O(e);case"usage":console.log("渲染使用次数:",e.max_uses,e.current_uses);let r=e.max_uses||1,n=e.current_uses||0,o=r-n;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"text-default-500 text-sm",children:[n,"/",r]}),r>1&&t.jsx(h.e,{content:`最多可使用${r}次，已使用${n}次，剩余${o}次`,children:t.jsx(m,{content:`${o}`,color:"primary",size:"sm",children:t.jsx(N,{className:"h-4 w-4 text-default-400 cursor-help"})})})]});case"created_at":return t.jsx("div",{className:"text-default-500 text-sm",children:J(e.created_at)});case"expires_at":return(0,t.jsxs)("div",{className:"text-default-500 text-sm",children:[t.jsx("div",{children:J(e.expires_at)}),t.jsx("div",{className:"text-xs mt-1",children:"pending"===e.status?`剩余: ${_(e.expires_at)}`:""})]});case"actions":if("sent"===a)return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&!E(e.expires_at)&&t.jsx(h.e,{content:"复制邀请链接",children:t.jsx(f.A,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>u(e.token),children:t.jsx(z,{className:"h-4 w-4"})})}),(e.is_generic||!e.email)&&!E(e.expires_at)&&"pending"!==e.status&&t.jsx(h.e,{content:"复制邀请链接",children:t.jsx(f.A,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>u(e.token),children:t.jsx(z,{className:"h-4 w-4"})})}),l&&t.jsx(h.e,{content:"删除邀请",children:t.jsx(f.A,{isIconOnly:!0,size:"sm",color:"danger",variant:"light",onPress:()=>T(e.id),isDisabled:c===e.id,children:t.jsx($.Z,{className:"h-4 w-4"})})})]});return t.jsx("div",{className:"flex items-center gap-2",children:"pending"===e.status&&!E(e.expires_at)&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(f.A,{size:"sm",color:"danger",variant:"flat",onPress:()=>L(e.token,e.id),isDisabled:c===e.id,children:"拒绝"}),t.jsx(f.A,{size:"sm",color:"primary",onPress:()=>S(e.token,e.id),isDisabled:c===e.id,isLoading:c===e.id,children:"接受"})]})});default:return null}};return 0===e.length?t.jsx(g.w,{children:(0,t.jsxs)(x.G,{className:"py-8 text-center",children:[t.jsx("div",{className:"text-default-400 mb-2",children:t.jsx(k.Z,{className:"h-12 w-12 mx-auto"})}),t.jsx("p",{className:"text-default-600",children:"sent"===a?"暂无已发送的邀请":"暂无收到的邀请"})]})}):t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)(y.b,{"aria-label":"sent"===a?"已发送的邀请":"收到的邀请",classNames:{base:"min-w-full",table:"min-w-full",thead:"bg-default-50",th:"text-default-700 font-semibold",tr:"hover:bg-default-50 transition-colors border-b border-default-100"},children:[t.jsx(b.J,{columns:q,children:e=>t.jsx(v.j,{className:"text-sm",children:e.label},e.key)}),t.jsx(p.y,{items:e,emptyContent:"暂无邀请",children:e=>(console.log("渲染行:",e),t.jsx(w.g,{className:"h-14",children:a=>(console.log("渲染列:",a.toString()),t.jsx(j.X,{children:D(e,a.toString())}))},e.id))})]})})}},25384:(e,a,s)=>{"use strict";s.d(a,{Hc:()=>g,Oh:()=>f,X$:()=>v,YF:()=>h,ao:()=>b,cW:()=>d,kN:()=>y,l0:()=>u,t3:()=>x,vP:()=>m});var t=s(26274),r=s(81271),i=s(31296),n=s(3729),l=s(96548),o=s(89023),c=s(30853);function d(){let{user:e,updateUser:a}=(0,c.useAuth)(),s=(0,t.NL)(),{showToast:i}=(0,o.useToast)(),[d,u]=(0,n.useState)([]),m=(0,n.useRef)(!1),{data:h,isLoading:f,error:g}=(0,r.a)({queryKey:["families"],queryFn:async()=>{try{let e=await (0,l.Io)("/families/user");return m.current=!1,e.data}catch(e){throw console.error("获取家庭列表失败:",e),m.current=!0,e}},enabled:!!e,staleTime:3e5,retry:m.current?0:2}),x=h?.find(a=>a.id===e?.currentFamilyId),{data:y,isLoading:b,error:v}=(0,r.a)({queryKey:["familyMembers",e?.currentFamilyId],queryFn:async()=>(await (0,l.Io)(`/families/${e?.currentFamilyId}/members`)).data,enabled:!!e?.currentFamilyId&&!m.current,staleTime:3e5,gcTime:3e5,retry:1});(0,n.useEffect)(()=>{g&&console.error("获取家庭列表失败:",g)},[g]),(0,n.useEffect)(()=>{v&&console.error("获取家庭成员失败:",v)},[v]);let p=(0,n.useCallback)(t=>{e&&(a({...e,currentFamilyId:t.id}),s.invalidateQueries({queryKey:["familyMembers"]}),s.invalidateQueries({queryKey:["transactions"]}),s.invalidateQueries({queryKey:["categories"]}),s.invalidateQueries({queryKey:["statistics"]}),s.invalidateQueries({queryKey:["categoryStats"]}),s.invalidateQueries({queryKey:["recentTransactions"]}),localStorage.setItem("currentFamilyId",t.id.toString()))},[e,a,s]),w=(0,n.useCallback)(()=>x?.owner_id===e?.id||y?.some(a=>a.user_id===e?.id&&"admin"===a.role),[x,e,y]);return{families:h,members:y||d,currentFamily:x,isLoading:f||b,error:g,setCurrentFamily:p,isAdmin:w}}function u(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async e=>(await (0,l.Io)("/families",{method:"POST",body:JSON.stringify(e)})).data,onSuccess:()=>{a("家庭创建成功","success"),e.invalidateQueries({queryKey:["families"]})},onError:e=>{a(`创建失败: ${e.message}`,"error")}})}function m(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async({familyId:e,data:a})=>(await (0,l.Io)(`/families/${e}`,{method:"PATCH",body:JSON.stringify(a)})).data,onSuccess:()=>{a("家庭信息已更新","success"),e.invalidateQueries({queryKey:["families"]})},onError:e=>{a(`更新失败: ${e.message}`,"error")}})}function h(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async e=>{await (0,l.Io)(`/families/${e}`,{method:"DELETE"})},onSuccess:()=>{a("家庭已删除","success"),e.invalidateQueries({queryKey:["families"]})},onError:e=>{a(`删除失败: ${e.message}`,"error")}})}function f(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async({familyId:e,data:a})=>(await (0,l.Io)(`/families/${e}/members`,{method:"POST",body:JSON.stringify(a)})).data,onSuccess:()=>{a("成员已添加","success"),e.invalidateQueries({queryKey:["family"]})},onError:e=>{a(`添加失败: ${e.message}`,"error")}})}function g(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async({familyId:e,memberId:a,role:s})=>(await (0,l.Io)(`/families/${e}/members/${a}`,{method:"PATCH",body:JSON.stringify({role:s})})).data,onSuccess:()=>{a("成员角色已更新","success"),e.invalidateQueries({queryKey:["family"]})},onError:e=>{a(`更新失败: ${e.message}`,"error")}})}function x(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async({familyId:e,memberId:a})=>{await (0,l.Io)(`/families/${e}/members/${a}`,{method:"DELETE"})},onSuccess:()=>{a("成员已移除","success"),e.invalidateQueries({queryKey:["family"]})},onError:e=>{a(`移除失败: ${e.message}`,"error")}})}function y(e){return(0,r.a)({queryKey:["familyInvitations",e],queryFn:async()=>e?(await (0,l.Io)(`/families/${e}/invitations`)).data:[],enabled:!!e})}function b(){let e=(0,t.NL)(),{showToast:a}=(0,o.useToast)();return(0,i.D)({mutationFn:async({familyId:e,invitationId:a})=>{await (0,l.Io)(`/families/${e}/invitations/${a}`,{method:"DELETE"})},onSuccess:()=>{a("邀请已删除","success"),e.invalidateQueries({queryKey:["familyInvitations"]})},onError:e=>{a(`删除失败: ${e.message}`,"error")}})}function v(e){return(0,r.a)({queryKey:["userInvitations",e],queryFn:async()=>e&&(await (0,l.Io)(`/users/${e}/invitations`)).data||[],enabled:!!e})}},37384:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let t=(0,s(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/layout.tsx`),{__esModule:r,$$typeof:i}=t,n=t.default},72416:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3729);let r=t.forwardRef(function({title:e,titleId:a,...s},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},s),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))})}};