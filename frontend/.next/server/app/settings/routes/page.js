(()=>{var e={};e.id=1304,e.ids=[1304],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>f,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=r(50482),a=r(69108),i=r(62563),l=r.n(i),n=r(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["settings",{children:["routes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,58282)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/routes/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,16201)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/routes/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,37384)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,66053)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,24117)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/routes/page.tsx"],c="/settings/routes/page",f={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/routes/page",pathname:"/settings/routes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27661:(e,t,r)=>{Promise.resolve().then(r.bind(r,70366))},88770:(e,t,r)=>{Promise.resolve().then(r.bind(r,62553))},68828:(e,t,r)=>{Promise.resolve().then(r.bind(r,65857))},51838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(97075).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},70366:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95344);r(3729);var a=r(8428),i=r(56506),l=r(56686),n=r(2273),o=r(89895),d=r(54052),u=r(99046),c=r(37121),f=r(23485),m=r(13746),h=r(91529),y=r(41575);let x=[{name:"系统设置",href:"/settings/system",icon:s.jsx(n.Z,{size:20})},{name:"用户管理",href:"/settings/users",icon:s.jsx(o.Z,{size:20})},{name:"家庭管理",href:"/settings/family",icon:s.jsx(d.Z,{size:20})},{name:"分类管理",href:"/settings/category",icon:s.jsx(u.Z,{size:20})},{name:"系统日志",href:"/settings/logs",icon:s.jsx(c.Z,{size:20})},{name:"备份恢复",href:"/settings/backup",icon:s.jsx(f.Z,{size:20})}];function g({children:e}){let t=(0,a.usePathname)();return s.jsx(y.Z,{title:"系统后台管理",description:"配置平台参数、管理成员与权限，保持系统稳定运行。",backgroundVariant:"minimal",contentClassName:"py-8",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row",children:[(0,s.jsxs)(l.w,{className:"w-full max-w-sm shrink-0 border border-default-100 bg-background/70 backdrop-blur",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 p-4 mb-1",children:[s.jsx(h.E.div,{animate:{rotate:[0,15,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:s.jsx(m.Z,{size:24,className:"text-primary"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"管理导航"})]}),s.jsx("nav",{className:"space-y-1 p-2",children:x.map(e=>{let r=t===e.href;return(0,s.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 rounded-lg px-4 py-3 text-sm font-medium transition-colors ${r?"bg-primary text-primary-foreground shadow-md":"hover:bg-default-100"}`,children:[e.icon,s.jsx("span",{children:e.name})]},e.href)})})]}),s.jsx(l.w,{className:"flex-1 border border-default-100 bg-background/70 p-6 backdrop-blur",children:e})]})})}},62553:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(95344),a=r(95396);function i({children:e}){return s.jsx(a.Z,{requiredRole:"admin",children:e})}},65857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>th});var s=r(95344),a=r(3729),i=r.n(a),l=r(78225),n=r(44738),o=r(30891),d=r(45191),u=r(56686),c=r(40237),f=r(51838),m=r(30853),h=r(26274),y=r(81271),x=r(31296),g=r(96548),p=r(40005),v=r(75019),b=r(97075);let j=(0,b.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var w=r(38271);let _=(0,b.Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),A=(0,b.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var V=r(61261);let S=[{header:"路径",accessorKey:"path"},{header:"名称",accessorKey:"name"},{header:"描述",accessorKey:"description"},{header:"权限",accessorKey:"permission",cell:({row:e})=>{let t=e.original.permission;return({[V.wI.PUBLIC]:"公开",[V.wI.PRIVATE]:"私有",[V.wI.FAMILY]:"家庭",[V.wI.ADMIN]:"管理员"})[t]||t}},{header:"状态",accessorKey:"is_active",cell:({row:e})=>e.original.is_active?"启用":"禁用"},{header:"创建时间",accessorKey:"created_at",cell:({row:e})=>new Date(e.original.created_at).toLocaleString()},{header:"更新时间",accessorKey:"updated_at",cell:({row:e})=>new Date(e.original.updated_at).toLocaleString()},{header:"操作",cell:({row:e})=>{let t=e.original;return(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(v.e,{content:"编辑",children:s.jsx(n.A,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>t.onEdit?.(t),children:s.jsx(j,{className:"w-4 h-4"})})}),s.jsx(v.e,{content:"删除",children:s.jsx(n.A,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>t.onDelete?.(t),children:s.jsx(w.Z,{className:"w-4 h-4"})})}),s.jsx(v.e,{content:t.is_active?"禁用":"启用",children:s.jsx(n.A,{isIconOnly:!0,size:"sm",variant:"light",color:t.is_active?"warning":"success",onPress:()=>t.onToggleActive?.(t),children:s.jsx(_,{className:"w-4 h-4"})})}),s.jsx(v.e,{content:"查看性能",children:s.jsx(n.A,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>t.onViewStats?.(t),children:s.jsx(A,{className:"w-4 h-4"})})})]})}}];var F=r(70596),k=r(81686),N=r(26417),D=r(97446),C=r(41931),E=r(70199),I=r(16),O=r(44360),P=r(3635),T=r(75462),M=e=>"checkbox"===e.type,L=e=>e instanceof Date,R=e=>null==e;let q=e=>"object"==typeof e;var z=e=>!R(e)&&!Array.isArray(e)&&q(e)&&!L(e),B=e=>z(e)&&e.target?M(e.target)?e.target.checked:e.target.value:e,U=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,K=(e,t)=>e.has(U(t)),Y=e=>{let t=e.constructor&&e.constructor.prototype;return z(t)&&t.hasOwnProperty("isPrototypeOf")};function Z(e){let t;let r=Array.isArray(e);if("undefined"!=typeof FileList&&FileList,e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(r||z(e)))return e;else if(t=r?[]:{},r||Y(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=Z(e[r]));else t=e;return t}var $=e=>Array.isArray(e)?e.filter(Boolean):[],G=e=>void 0===e,W=(e,t,r)=>{if(!t||!z(e))return r;let s=$(t.split(/[,[\].]+?/)).reduce((e,t)=>R(e)?e:e[t],e);return G(s)||s===e?G(e[t])?r:e[t]:s},H=e=>"boolean"==typeof e,Q=e=>/^\w*$/.test(e),X=e=>$(e.replace(/["|']|\]/g,"").split(/\.|\[/)),J=(e,t,r)=>{let s=-1,a=Q(t)?[t]:X(t),i=a.length,l=i-1;for(;++s<i;){let t=a[s],i=r;if(s!==l){let r=e[t];i=z(r)||Array.isArray(r)?r:isNaN(+a[s+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}return e};let ee={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},et={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},er={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},es=a.createContext(null),ea=()=>a.useContext(es);var ei=(e,t,r,s=!0)=>{let a={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(a,i,{get:()=>(t._proxyFormState[i]!==et.all&&(t._proxyFormState[i]=!s||et.all),r&&(r[i]=!0),e[i])});return a},el=e=>z(e)&&!Object.keys(e).length,en=(e,t,r,s)=>{r(e);let{name:a,...i}=e;return el(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!s||et.all))},eo=e=>Array.isArray(e)?e:[e],ed=(e,t,r)=>!e||!t||e===t||eo(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e)));function eu(e){let t=a.useRef(e);t.current=e,a.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var ec=e=>"string"==typeof e,ef=(e,t,r,s,a)=>ec(e)?(s&&t.watch.add(e),W(r,e,a)):Array.isArray(e)?e.map(e=>(s&&t.watch.add(e),W(r,e))):(s&&(t.watchAll=!0),r);let em=e=>e.render(function(e){let t=ea(),{name:r,disabled:s,control:i=t.control,shouldUnregister:l}=e,n=K(i._names.array,r),o=function(e){let t=ea(),{control:r=t.control,name:s,defaultValue:i,disabled:l,exact:n}=e||{},o=a.useRef(s);o.current=s,eu({disabled:l,subject:r._subjects.values,next:e=>{ed(o.current,e.name,n)&&u(Z(ef(o.current,r._names,e.values||r._formValues,!1,i)))}});let[d,u]=a.useState(r._getWatch(s,i));return a.useEffect(()=>r._removeUnmounted()),d}({control:i,name:r,defaultValue:W(i._formValues,r,W(i._defaultValues,r,e.defaultValue)),exact:!0}),d=function(e){let t=ea(),{control:r=t.control,disabled:s,name:i,exact:l}=e||{},[n,o]=a.useState(r._formState),d=a.useRef(!0),u=a.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=a.useRef(i);return c.current=i,eu({disabled:s,next:e=>d.current&&ed(c.current,e.name,l)&&en(e,u.current,r._updateFormState)&&o({...r._formState,...e}),subject:r._subjects.state}),a.useEffect(()=>(d.current=!0,u.current.isValid&&r._updateValid(!0),()=>{d.current=!1}),[r]),a.useMemo(()=>ei(n,r,u.current,!1),[n,r])}({control:i,name:r,exact:!0}),u=a.useRef(i.register(r,{...e.rules,value:o,...H(e.disabled)?{disabled:e.disabled}:{}})),c=a.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!W(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!W(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!W(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!W(d.validatingFields,r)},error:{enumerable:!0,get:()=>W(d.errors,r)}}),[d,r]),f=a.useMemo(()=>({name:r,value:o,...H(s)||d.disabled?{disabled:d.disabled||s}:{},onChange:e=>u.current.onChange({target:{value:B(e),name:r},type:ee.CHANGE}),onBlur:()=>u.current.onBlur({target:{value:W(i._formValues,r),name:r},type:ee.BLUR}),ref:e=>{let t=W(i._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}}),[r,i._formValues,s,d.disabled,o,i._fields]);return a.useEffect(()=>{let e=i._options.shouldUnregister||l,t=(e,t)=>{let r=W(i._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){let e=Z(W(i._options.defaultValues,r));J(i._defaultValues,r,e),G(W(i._formValues,r))&&J(i._formValues,r,e)}return n||i.register(r),()=>{(n?e&&!i._state.action:e)?i.unregister(r):t(r,!1)}},[r,i,n,l]),a.useEffect(()=>{i._updateDisabledField({disabled:s,fields:i._fields,name:r})},[s,r,i]),a.useMemo(()=>({field:f,formState:d,fieldState:c}),[f,d,c])}(e));var eh=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},ey=e=>({isOnSubmit:!e||e===et.onSubmit,isOnBlur:e===et.onBlur,isOnChange:e===et.onChange,isOnAll:e===et.all,isOnTouch:e===et.onTouched}),ex=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let eg=(e,t,r,s)=>{for(let a of r||Object.keys(e)){let r=W(e,a);if(r){let{_f:e,...i}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s||e.ref&&t(e.ref,e.name)&&!s)return!0;if(eg(i,t))break}else if(z(i)&&eg(i,t))break}}};var ep=(e,t,r)=>{let s=eo(W(e,r));return J(s,"root",t[r]),J(e,r,s),e},ev=e=>"file"===e.type,eb=e=>"function"==typeof e,ej=e=>!1,ew=e=>ec(e),e_=e=>"radio"===e.type,eA=e=>e instanceof RegExp;let eV={value:!1,isValid:!1},eS={value:!0,isValid:!0};var eF=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!G(e[0].attributes.value)?G(e[0].value)||""===e[0].value?eS:{value:e[0].value,isValid:!0}:eS:eV}return eV};let ek={isValid:!1,value:null};var eN=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ek):ek;function eD(e,t,r="validate"){if(ew(e)||Array.isArray(e)&&e.every(ew)||H(e)&&!e)return{type:r,message:ew(e)?e:"",ref:t}}var eC=e=>z(e)&&!eA(e)?e:{value:e,message:""},eE=async(e,t,r,s,a,i)=>{let{ref:l,refs:n,required:o,maxLength:d,minLength:u,min:c,max:f,pattern:m,validate:h,name:y,valueAsNumber:x,mount:g}=e._f,p=W(r,y);if(!g||t.has(y))return{};let v=n?n[0]:l,b=e=>{a&&v.reportValidity&&(v.setCustomValidity(H(e)?"":e||""),v.reportValidity())},j={},w=e_(l),_=M(l),A=(x||ev(l))&&G(l.value)&&G(p)||ej(l)&&""===l.value||""===p||Array.isArray(p)&&!p.length,V=eh.bind(null,y,s,j),S=(e,t,r,s=er.maxLength,a=er.minLength)=>{let i=e?t:r;j[y]={type:e?s:a,message:i,ref:l,...V(e?s:a,i)}};if(i?!Array.isArray(p)||!p.length:o&&(!(w||_)&&(A||R(p))||H(p)&&!p||_&&!eF(n).isValid||w&&!eN(n).isValid)){let{value:e,message:t}=ew(o)?{value:!!o,message:o}:eC(o);if(e&&(j[y]={type:er.required,message:t,ref:v,...V(er.required,t)},!s))return b(t),j}if(!A&&(!R(c)||!R(f))){let e,t;let r=eC(f),a=eC(c);if(R(p)||isNaN(p)){let s=l.valueAsDate||new Date(p),i=e=>new Date(new Date().toDateString()+" "+e),n="time"==l.type,o="week"==l.type;ec(r.value)&&p&&(e=n?i(p)>i(r.value):o?p>r.value:s>new Date(r.value)),ec(a.value)&&p&&(t=n?i(p)<i(a.value):o?p<a.value:s<new Date(a.value))}else{let s=l.valueAsNumber||(p?+p:p);R(r.value)||(e=s>r.value),R(a.value)||(t=s<a.value)}if((e||t)&&(S(!!e,r.message,a.message,er.max,er.min),!s))return b(j[y].message),j}if((d||u)&&!A&&(ec(p)||i&&Array.isArray(p))){let e=eC(d),t=eC(u),r=!R(e.value)&&p.length>+e.value,a=!R(t.value)&&p.length<+t.value;if((r||a)&&(S(r,e.message,t.message),!s))return b(j[y].message),j}if(m&&!A&&ec(p)){let{value:e,message:t}=eC(m);if(eA(e)&&!p.match(e)&&(j[y]={type:er.pattern,message:t,ref:l,...V(er.pattern,t)},!s))return b(t),j}if(h){if(eb(h)){let e=eD(await h(p,r),v);if(e&&(j[y]={...e,...V(er.validate,e.message)},!s))return b(e.message),j}else if(z(h)){let e={};for(let t in h){if(!el(e)&&!s)break;let a=eD(await h[t](p,r),v,t);a&&(e={...a,...V(t,a.message)},b(a.message),s&&(j[y]=e))}if(!el(e)&&(j[y]={ref:v,...e},!s))return j}}return b(!0),j};function eI(e,t){let r=Array.isArray(t)?t:Q(t)?[t]:X(t),s=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,s=0;for(;s<r;)e=G(e)?s++:e[t[s++]];return e}(e,r),a=r.length-1,i=r[a];return s&&delete s[i],0!==a&&(z(s)&&el(s)||Array.isArray(s)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!G(e[t]))return!1;return!0}(s))&&eI(e,r.slice(0,-1)),e}var eO=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},eP=e=>R(e)||!q(e);function eT(e,t){if(eP(e)||eP(t))return e===t;if(L(e)&&L(t))return e.getTime()===t.getTime();let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a of r){let r=e[a];if(!s.includes(a))return!1;if("ref"!==a){let e=t[a];if(L(r)&&L(e)||z(r)&&z(e)||Array.isArray(r)&&Array.isArray(e)?!eT(r,e):r!==e)return!1}}return!0}var eM=e=>"select-multiple"===e.type,eL=e=>e_(e)||M(e),eR=e=>ej(e)&&e.isConnected,eq=e=>{for(let t in e)if(eb(e[t]))return!0;return!1};function ez(e,t={}){let r=Array.isArray(e);if(z(e)||r)for(let r in e)Array.isArray(e[r])||z(e[r])&&!eq(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ez(e[r],t[r])):R(e[r])||(t[r]=!0);return t}var eB=(e,t)=>(function e(t,r,s){let a=Array.isArray(t);if(z(t)||a)for(let a in t)Array.isArray(t[a])||z(t[a])&&!eq(t[a])?G(r)||eP(s[a])?s[a]=Array.isArray(t[a])?ez(t[a],[]):{...ez(t[a])}:e(t[a],R(r)?{}:r[a],s[a]):s[a]=!eT(t[a],r[a]);return s})(e,t,ez(t)),eU=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>G(e)?e:t?""===e?NaN:e?+e:e:r&&ec(e)?new Date(e):s?s(e):e;function eK(e){let t=e.ref;return ev(t)?t.files:e_(t)?eN(e.refs).value:eM(t)?[...t.selectedOptions].map(({value:e})=>e):M(t)?eF(e.refs).value:eU(G(t.value)?e.ref.value:t.value,e)}var eY=(e,t,r,s)=>{let a={};for(let r of e){let e=W(t,r);e&&J(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},eZ=e=>G(e)?e:eA(e)?e.source:z(e)?eA(e.value)?e.value.source:e.value:e;let e$="AsyncFunction";var eG=e=>!!e&&!!e.validate&&!!(eb(e.validate)&&e.validate.constructor.name===e$||z(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===e$)),eW=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eH(e,t,r){let s=W(e,r);if(s||Q(r))return{error:s,name:r};let a=r.split(".");for(;a.length;){let s=a.join("."),i=W(t,s),l=W(e,s);if(i&&!Array.isArray(i)&&r!==s)break;if(l&&l.type)return{name:s,error:l};a.pop()}return{name:r}}var eQ=(e,t,r,s,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?!s.isOnChange:!a.isOnChange)||e),eX=(e,t)=>!$(W(e,t)).length&&eI(e,t);let eJ={mode:et.onSubmit,reValidateMode:et.onChange,shouldFocusError:!0},e0=(e,t,r)=>{if(e&&"reportValidity"in e){let s=W(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},e1=(e,t)=>{for(let r in t.fields){let s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?e0(s.ref,r,e):s&&s.refs&&s.refs.forEach(t=>e0(t,r,e))}},e2=(e,t)=>{t.shouldUseNativeValidation&&e1(e,t);let r={};for(let s in e){let a=W(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(e5(t.names||Object.keys(e),s)){let e=Object.assign({},W(r,s));J(e,"root",i),J(r,s,e)}else J(r,s,i)}return r},e5=(e,t)=>{let r=e4(t);return e.some(e=>e4(e).match(`^${r}\\.\\d+`))};function e4(e){return e.replace(/\]|\[/g,"")}var e3=r(29709);let e6=e3.z.object({path:e3.z.string().min(1,"路径不能为空"),name:e3.z.string().min(1,"名称不能为空"),description:e3.z.string(),type:e3.z.nativeEnum(V.Yt),permission:e3.z.nativeEnum(V.wI),is_active:e3.z.boolean(),user_id:e3.z.number().optional(),family_id:e3.z.number().nullable().optional()});function e8({isOpen:e,onClose:t,onSubmit:r,initialData:l}){var o;let{control:d,handleSubmit:u,formState:{errors:c,isSubmitting:f},reset:m}=function(e={}){let t=a.useRef(void 0),r=a.useRef(void 0),[s,i]=a.useState({isDirty:!1,isValidating:!1,isLoading:eb(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:eb(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={}){let t,r={...eJ,...e},s={submitCount:0,isDirty:!1,isLoading:eb(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},i=(z(r.defaultValues)||z(r.values))&&Z(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:Z(i),n={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c={values:eO(),array:eO(),state:eO()},f=ey(r.mode),m=ey(r.reValidateMode),h=r.criteriaMode===et.all,y=e=>t=>{clearTimeout(d),d=setTimeout(e,t)},x=async e=>{if(!r.disabled&&(u.isValid||e)){let e=r.resolver?el((await w()).errors):await A(a,!0);e!==s.isValid&&c.state.next({isValid:e})}},g=(e,t)=>{!r.disabled&&(u.isValidating||u.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(t?J(s.validatingFields,e,t):eI(s.validatingFields,e))}),c.state.next({validatingFields:s.validatingFields,isValidating:!el(s.validatingFields)}))},p=(e,t)=>{J(s.errors,e,t),c.state.next({errors:s.errors})},v=(e,t,r,s)=>{let o=W(a,e);if(o){let a=W(l,e,G(r)?W(i,e):r);G(a)||s&&s.defaultChecked||t?J(l,e,t?a:eK(o._f)):F(e,a),n.mount&&x()}},b=(e,t,l,n,o)=>{let d=!1,f=!1,m={name:e};if(!r.disabled){let r=!!(W(a,e)&&W(a,e)._f&&W(a,e)._f.disabled);if(!l||n){u.isDirty&&(f=s.isDirty,s.isDirty=m.isDirty=V(),d=f!==m.isDirty);let a=r||eT(W(i,e),t);f=!!(!r&&W(s.dirtyFields,e)),a||r?eI(s.dirtyFields,e):J(s.dirtyFields,e,!0),m.dirtyFields=s.dirtyFields,d=d||u.dirtyFields&&!a!==f}if(l){let t=W(s.touchedFields,e);t||(J(s.touchedFields,e,l),m.touchedFields=s.touchedFields,d=d||u.touchedFields&&t!==l)}d&&o&&c.state.next(m)}return d?m:{}},j=(e,a,i,l)=>{let n=W(s.errors,e),o=u.isValid&&H(a)&&s.isValid!==a;if(r.delayError&&i?(t=y(()=>p(e,i)))(r.delayError):(clearTimeout(d),t=null,i?J(s.errors,e,i):eI(s.errors,e)),(i?!eT(n,i):n)||!el(l)||o){let t={...l,...o&&H(a)?{isValid:a}:{},errors:s.errors,name:e};s={...s,...t},c.state.next(t)}},w=async e=>{g(e,!0);let t=await r.resolver(l,r.context,eY(e||o.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return g(e),t},_=async e=>{let{errors:t}=await w(e);if(e)for(let r of e){let e=W(t,r);e?J(s.errors,r,e):eI(s.errors,r)}else s.errors=t;return t},A=async(e,t,a={valid:!0})=>{for(let i in e){let n=e[i];if(n){let{_f:e,...d}=n;if(e){let d=o.array.has(e.name),c=n._f&&eG(n._f);c&&u.validatingFields&&g([i],!0);let f=await eE(n,o.disabled,l,h,r.shouldUseNativeValidation&&!t,d);if(c&&u.validatingFields&&g([i]),f[e.name]&&(a.valid=!1,t))break;t||(W(f,e.name)?d?ep(s.errors,f,e.name):J(s.errors,e.name,f[e.name]):eI(s.errors,e.name))}el(d)||await A(d,t,a)}}return a.valid},V=(e,t)=>!r.disabled&&(e&&t&&J(l,e,t),!eT(I(),i)),S=(e,t,r)=>ef(e,o,{...n.mount?l:G(t)?i:ec(e)?{[e]:t}:t},r,t),F=(e,t,r={})=>{let s=W(a,e),i=t;if(s){let r=s._f;r&&(r.disabled||J(l,e,eU(t,r)),i=ej(r.ref)&&R(t)?"":t,eM(r.ref)?[...r.ref.options].forEach(e=>e.selected=i.includes(e.value)):r.refs?M(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find(t=>t===e.value):i===e.value)):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach(e=>e.checked=e.value===i):ev(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||c.values.next({name:e,values:{...l}})))}(r.shouldDirty||r.shouldTouch)&&b(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&E(e)},k=(e,t,r)=>{for(let s in t){let i=t[s],l=`${e}.${s}`,n=W(a,l);(o.array.has(e)||z(i)||n&&!n._f)&&!L(i)?k(l,i,r):F(l,i,r)}},N=(e,t,r={})=>{let d=W(a,e),f=o.array.has(e),m=Z(t);J(l,e,m),f?(c.array.next({name:e,values:{...l}}),(u.isDirty||u.dirtyFields)&&r.shouldDirty&&c.state.next({name:e,dirtyFields:eB(i,l),isDirty:V(e,m)})):!d||d._f||R(m)?F(e,m,r):k(e,m,r),ex(e,o)&&c.state.next({...s}),c.values.next({name:n.mount?e:void 0,values:{...l}})},D=async e=>{n.mount=!0;let i=e.target,d=i.name,y=!0,p=W(a,d),v=e=>{y=Number.isNaN(e)||L(e)&&isNaN(e.getTime())||eT(e,W(l,d,e))};if(p){let n,_;let V=i.type?eK(p._f):B(e),S=e.type===ee.BLUR||e.type===ee.FOCUS_OUT,F=!eW(p._f)&&!r.resolver&&!W(s.errors,d)&&!p._f.deps||eQ(S,W(s.touchedFields,d),s.isSubmitted,m,f),k=ex(d,o,S);J(l,d,V),S?(p._f.onBlur&&p._f.onBlur(e),t&&t(0)):p._f.onChange&&p._f.onChange(e);let N=b(d,V,S,!1),D=!el(N)||k;if(S||c.values.next({name:d,type:e.type,values:{...l}}),F)return u.isValid&&("onBlur"===r.mode&&S?x():S||x()),D&&c.state.next({name:d,...k?{}:N});if(!S&&k&&c.state.next({...s}),r.resolver){let{errors:e}=await w([d]);if(v(V),y){let t=eH(s.errors,a,d),r=eH(e,a,t.name||d);n=r.error,d=r.name,_=el(e)}}else g([d],!0),n=(await eE(p,o.disabled,l,h,r.shouldUseNativeValidation))[d],g([d]),v(V),y&&(n?_=!1:u.isValid&&(_=await A(a,!0)));y&&(p._f.deps&&E(p._f.deps),j(d,_,n,N))}},C=(e,t)=>{if(W(s.errors,t)&&e.focus)return e.focus(),1},E=async(e,t={})=>{let i,l;let n=eo(e);if(r.resolver){let t=await _(G(e)?e:n);i=el(t),l=e?!n.some(e=>W(t,e)):i}else e?((l=(await Promise.all(n.map(async e=>{let t=W(a,e);return await A(t&&t._f?{[e]:t}:t)}))).every(Boolean))||s.isValid)&&x():l=i=await A(a);return c.state.next({...!ec(e)||u.isValid&&i!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:i}:{},errors:s.errors}),t.shouldFocus&&!l&&eg(a,C,e?n:o.mount),l},I=e=>{let t={...n.mount?l:i};return G(e)?t:ec(e)?W(t,e):e.map(e=>W(t,e))},O=(e,t)=>({invalid:!!W((t||s).errors,e),isDirty:!!W((t||s).dirtyFields,e),error:W((t||s).errors,e),isValidating:!!W(s.validatingFields,e),isTouched:!!W((t||s).touchedFields,e)}),P=(e,t,r)=>{let i=(W(a,e,{_f:{}})._f||{}).ref,{ref:l,message:n,type:o,...d}=W(s.errors,e)||{};J(s.errors,e,{...d,...t,ref:i}),c.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&i&&i.focus&&i.focus()},T=(e,t={})=>{for(let n of e?eo(e):o.mount)o.mount.delete(n),o.array.delete(n),t.keepValue||(eI(a,n),eI(l,n)),t.keepError||eI(s.errors,n),t.keepDirty||eI(s.dirtyFields,n),t.keepTouched||eI(s.touchedFields,n),t.keepIsValidating||eI(s.validatingFields,n),r.shouldUnregister||t.keepDefaultValue||eI(i,n);c.values.next({values:{...l}}),c.state.next({...s,...t.keepDirty?{isDirty:V()}:{}}),t.keepIsValid||x()},q=({disabled:e,name:t,field:r,fields:s})=>{(H(e)&&n.mount||e||o.disabled.has(t))&&(e?o.disabled.add(t):o.disabled.delete(t),b(t,eK(r?r._f:W(s,t)._f),!1,!1,!0))},U=(e,t={})=>{let s=W(a,e),l=H(t.disabled)||H(r.disabled);return J(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),o.mount.add(e),s?q({field:s,disabled:H(t.disabled)?t.disabled:r.disabled,name:e}):v(e,!0,t.value),{...l?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:eZ(t.min),max:eZ(t.max),minLength:eZ(t.minLength),maxLength:eZ(t.maxLength),pattern:eZ(t.pattern)}:{},name:e,onChange:D,onBlur:D,ref:l=>{if(l){U(e,t),s=W(a,e);let r=G(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,n=eL(r),o=s._f.refs||[];(n?o.find(e=>e===r):r===s._f.ref)||(J(a,e,{_f:{...s._f,...n?{refs:[...o.filter(eR),r,...Array.isArray(W(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),v(e,!1,void 0,r))}else(s=W(a,e,{}))._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(K(o.array,e)&&n.action)&&o.unMount.add(e)}}},Y=()=>r.shouldFocusError&&eg(a,C,o.mount),Q=(e,t)=>async i=>{let n;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let d=Z(l);if(o.disabled.size)for(let e of o.disabled)J(d,e,void 0);if(c.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await w();s.errors=e,d=t}else await A(a);if(eI(s.errors,"root"),el(s.errors)){c.state.next({errors:{}});try{await e(d,i)}catch(e){n=e}}else t&&await t({...s.errors},i),Y(),setTimeout(Y);if(c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:el(s.errors)&&!n,submitCount:s.submitCount+1,errors:s.errors}),n)throw n},X=(e,t={})=>{let d=e?Z(e):i,f=Z(d),m=el(e),h=m?i:f;if(t.keepDefaultValues||(i=d),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...o.mount,...Object.keys(eB(i,l))])))W(s.dirtyFields,e)?J(h,e,W(l,e)):N(e,W(h,e));else a={};l=r.shouldUnregister?t.keepDefaultValues?Z(i):{}:Z(h),c.array.next({values:{...h}}),c.values.next({values:{...h}})}o={mount:t.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues,n.watch=!!r.shouldUnregister,c.state.next({submitCount:t.keepSubmitCount?s.submitCount:0,isDirty:!m&&(t.keepDirty?s.isDirty:!!(t.keepDefaultValues&&!eT(e,i))),isSubmitted:!!t.keepIsSubmitted&&s.isSubmitted,dirtyFields:m?{}:t.keepDirtyValues?t.keepDefaultValues&&l?eB(i,l):s.dirtyFields:t.keepDefaultValues&&e?eB(i,e):t.keepDirty?s.dirtyFields:{},touchedFields:t.keepTouched?s.touchedFields:{},errors:t.keepErrors?s.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},er=(e,t)=>X(eb(e)?e(l):e,t);return{control:{register:U,unregister:T,getFieldState:O,handleSubmit:Q,setError:P,_executeSchema:w,_getWatch:S,_getDirty:V,_updateValid:x,_removeUnmounted:()=>{for(let e of o.unMount){let t=W(a,e);t&&(t._f.refs?t._f.refs.every(e=>!eR(e)):!eR(t._f.ref))&&T(e)}o.unMount=new Set},_updateFieldArray:(e,t=[],o,d,f=!0,m=!0)=>{if(d&&o&&!r.disabled){if(n.action=!0,m&&Array.isArray(W(a,e))){let t=o(W(a,e),d.argA,d.argB);f&&J(a,e,t)}if(m&&Array.isArray(W(s.errors,e))){let t=o(W(s.errors,e),d.argA,d.argB);f&&J(s.errors,e,t),eX(s.errors,e)}if(u.touchedFields&&m&&Array.isArray(W(s.touchedFields,e))){let t=o(W(s.touchedFields,e),d.argA,d.argB);f&&J(s.touchedFields,e,t)}u.dirtyFields&&(s.dirtyFields=eB(i,l)),c.state.next({name:e,isDirty:V(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else J(l,e,t)},_updateDisabledField:q,_getFieldArray:e=>$(W(n.mount?l:i,e,r.shouldUnregister?W(i,e,[]):[])),_reset:X,_resetDefaultValues:()=>eb(r.defaultValues)&&r.defaultValues().then(e=>{er(e,r.resetOptions),c.state.next({isLoading:!1})}),_updateFormState:e=>{s={...s,...e}},_disableForm:e=>{H(e)&&(c.state.next({disabled:e}),eg(a,(t,r)=>{let s=W(a,r);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:c,_proxyFormState:u,_setErrors:e=>{s.errors=e,c.state.next({errors:s.errors,isValid:!1})},get _fields(){return a},get _formValues(){return l},get _state(){return n},set _state(value){n=value},get _defaultValues(){return i},get _names(){return o},set _names(value){o=value},get _formState(){return s},set _formState(value){s=value},get _options(){return r},set _options(value){r={...r,...value}}},trigger:E,register:U,handleSubmit:Q,watch:(e,t)=>eb(e)?c.values.subscribe({next:r=>e(S(void 0,t),r)}):S(e,t,!0),setValue:N,getValues:I,reset:er,resetField:(e,t={})=>{W(a,e)&&(G(t.defaultValue)?N(e,Z(W(i,e))):(N(e,t.defaultValue),J(i,e,Z(t.defaultValue))),t.keepTouched||eI(s.touchedFields,e),t.keepDirty||(eI(s.dirtyFields,e),s.isDirty=t.defaultValue?V(e,Z(W(i,e))):V()),!t.keepError&&(eI(s.errors,e),u.isValid&&x()),c.state.next({...s}))},clearErrors:e=>{e&&eo(e).forEach(e=>eI(s.errors,e)),c.state.next({errors:e?s.errors:{}})},unregister:T,setError:P,setFocus:(e,t={})=>{let r=W(a,e),s=r&&r._f;if(s){let e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&eb(e.select)&&e.select())}},getFieldState:O}}(e),formState:s});let l=t.current.control;return l._options=e,eu({subject:l._subjects.state,next:e=>{en(e,l._proxyFormState,l._updateFormState,!0)&&i({...l._formState})}}),a.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),a.useEffect(()=>{if(l._proxyFormState.isDirty){let e=l._getDirty();e!==s.isDirty&&l._subjects.state.next({isDirty:e})}},[l,s.isDirty]),a.useEffect(()=>{e.values&&!eT(e.values,r.current)?(l._reset(e.values,l._options.resetOptions),r.current=e.values,i(e=>({...e}))):l._resetDefaultValues()},[e.values,l]),a.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),a.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),a.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),t.current.formState=ei(s,l),t.current}({resolver:(void 0===o&&(o={}),function(e,t,r){try{return Promise.resolve(function(t,s){try{var a=Promise.resolve(e6["sync"===o.mode?"parse":"parseAsync"](e,void 0)).then(function(t){return r.shouldUseNativeValidation&&e1({},r),{errors:{},values:o.raw?Object.assign({},e):t}})}catch(e){return s(e)}return a&&a.then?a.then(void 0,s):a}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:e2(function(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!r[l]){if("unionErrors"in s){var n=s.unionErrors[0].errors[0];r[l]={message:n.message,type:n.code}}else r[l]={message:i,type:a}}if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var o=r[l].types,d=o&&o[s.code];r[l]=eh(l,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r}(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(e){return Promise.reject(e)}}),defaultValues:l||{path:"",name:"",description:"",type:V.Yt.DASHBOARD,permission:V.wI.PRIVATE,is_active:!0}});i().useEffect(()=>{e&&m(l)},[e,l,m]);let h=async e=>{try{await r(e),t()}catch(e){console.error("Failed to submit route:",e)}};return s.jsx(F.R,{isOpen:e,onClose:t,size:"2xl",children:s.jsx(k.A,{children:(0,s.jsxs)("form",{onSubmit:u(h),children:[s.jsx(N.k,{children:l?"编辑路由":"新增路由"}),(0,s.jsxs)(D.I,{className:"space-y-4",children:[s.jsx(em,{name:"path",control:d,render:({field:e})=>s.jsx(C.Y,{...e,label:"路径",placeholder:"请输入路由路径",errorMessage:c.path?.message,isInvalid:!!c.path})}),s.jsx(em,{name:"name",control:d,render:({field:e})=>s.jsx(C.Y,{...e,label:"名称",placeholder:"请输入路由名称",errorMessage:c.name?.message,isInvalid:!!c.name})}),s.jsx(em,{name:"description",control:d,render:({field:e})=>s.jsx(E.Y,{...e,label:"描述",placeholder:"请输入路由描述",errorMessage:c.description?.message,isInvalid:!!c.description})}),s.jsx(em,{name:"type",control:d,render:({field:e})=>(0,s.jsxs)(I.g,{...e,label:"类型",errorMessage:c.type?.message,isInvalid:!!c.type,children:[s.jsx(O.R,{value:V.Yt.DASHBOARD,children:"仪表盘"},V.Yt.DASHBOARD),s.jsx(O.R,{value:V.Yt.TRANSACTIONS,children:"交易记录"},V.Yt.TRANSACTIONS),s.jsx(O.R,{value:V.Yt.STATISTICS,children:"统计分析"},V.Yt.STATISTICS),s.jsx(O.R,{value:V.Yt.SETTINGS,children:"设置"},V.Yt.SETTINGS),s.jsx(O.R,{value:V.Yt.CUSTOM,children:"自定义页面"},V.Yt.CUSTOM)]})}),s.jsx(em,{name:"permission",control:d,render:({field:e})=>(0,s.jsxs)(I.g,{...e,label:"权限",errorMessage:c.permission?.message,isInvalid:!!c.permission,children:[s.jsx(O.R,{value:V.wI.PUBLIC,children:"公开，任何人可访问"},V.wI.PUBLIC),s.jsx(O.R,{value:V.wI.PRIVATE,children:"私有，仅创建者可访问"},V.wI.PRIVATE),s.jsx(O.R,{value:V.wI.FAMILY,children:"家庭，仅家庭成员可访问"},V.wI.FAMILY),s.jsx(O.R,{value:V.wI.ADMIN,children:"管理员，仅家庭管理员可访问"},V.wI.ADMIN)]})}),s.jsx(em,{name:"is_active",control:d,render:({field:e})=>s.jsx(P.i,{name:e.name,ref:e.ref,isSelected:e.value,onValueChange:e.onChange,children:"启用状态"})})]}),(0,s.jsxs)(T.R,{children:[s.jsx(n.A,{color:"danger",variant:"light",onPress:t,children:"取消"}),s.jsx(n.A,{color:"primary",type:"submit",isLoading:f,children:"确定"})]})]})})})}var e7=r(18964),e9=r(86517),te=r(2422),tt=r(86902),tr=r(29173),ts=r(39078),ta=(0,e9.z)({chartName:"LineChart",GraphicalChild:te.x,axisComponents:[{axisType:"xAxis",AxisComp:tt.K},{axisType:"yAxis",AxisComp:tr.B}],formatAxisMap:ts.t9}),ti=r(20903),tl=r(90626),tn=r(31634),to=r(82087),td=r(55119),tu=r(51236);let tc=["#00C49F","#FF8042","#FFBB28","#FF0000"];function tf({isOpen:e,onClose:t,route:r}){let{data:a,isLoading:i}=(0,y.a)({queryKey:["route-stats",r?.id],queryFn:()=>(0,g.fM)(r?.id),enabled:e&&!!r?.id});if(!r)return null;let l=a?.data?.accessHistory?.map(e=>({time:new Date(e.timestamp).toLocaleString(),loadTime:e.loadTime,errorCount:e.errorCount}))||[],o=[{name:"成功访问",value:a?.data?.totalAccesses||0},{name:"缓存命中",value:a?.data?.cacheHits||0},{name:"错误次数",value:a?.data?.totalErrors||0}];return s.jsx(F.R,{isOpen:e,onClose:t,size:"3xl",scrollBehavior:"inside",children:(0,s.jsxs)(k.A,{children:[(0,s.jsxs)(N.k,{children:["路由性能统计 - ",r.name]}),s.jsx(D.I,{className:"space-y-6",children:i?s.jsx("div",{children:"加载中..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(u.w,{children:s.jsx(c.G,{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"总访问次数"}),s.jsx("div",{className:"text-2xl font-bold",children:a?.data?.totalAccesses||0})]})})}),s.jsx(u.w,{children:s.jsx(c.G,{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"平均加载时间"}),(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[a?.data?.averageLoadTime?.toFixed(2)||0,"ms"]})]})})}),s.jsx(u.w,{children:s.jsx(c.G,{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"错误率"}),(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[((a?.data?.totalErrors||0)/(a?.data?.totalAccesses||1)*100).toFixed(2),"%"]})]})})})]}),s.jsx(u.w,{children:s.jsx(c.G,{children:s.jsx("div",{className:"h-80",children:s.jsx(e7.h,{width:"100%",height:"100%",children:(0,s.jsxs)(ta,{data:l,children:[s.jsx(ti.q,{strokeDasharray:"3 3"}),s.jsx(tt.K,{dataKey:"time"}),s.jsx(tr.B,{yAxisId:"left"}),s.jsx(tr.B,{yAxisId:"right",orientation:"right"}),s.jsx(tl.u,{}),s.jsx(tn.D,{}),s.jsx(te.x,{yAxisId:"left",type:"monotone",dataKey:"loadTime",stroke:"#8884d8",name:"加载时间(ms)"}),s.jsx(te.x,{yAxisId:"right",type:"monotone",dataKey:"errorCount",stroke:"#ff0000",name:"错误次数"})]})})})})}),s.jsx(u.w,{children:s.jsx(c.G,{children:s.jsx("div",{className:"h-80",children:s.jsx(e7.h,{width:"100%",height:"100%",children:(0,s.jsxs)(to.u,{children:[s.jsx(td.b,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e}: ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((e,t)=>s.jsx(tu.b,{fill:tc[t%tc.length]},`cell-${t}`))}),s.jsx(tl.u,{})]})})})})})]})}),s.jsx(T.R,{children:s.jsx(n.A,{color:"primary",onPress:t,children:"关闭"})})]})})}var tm=r(34755);function th(){let{user:e,handleUnauthorized:t,isLoading:r}=(0,m.useAuth)(),a=e?.role==="admin",v=(0,h.NL)(),{isOpen:b,onOpen:j,onClose:w}=(0,l.q)(),{isOpen:_,onOpen:A,onClose:V}=(0,l.q)(),[F,k]=i().useState(),{data:N,isLoading:D}=(0,y.a)({queryKey:["routes","all"],queryFn:async()=>{try{return await (0,g._c)()}catch(e){throw e?.status===401?t():tm.Am.error(`获取路由失败: ${e?.message||"未知错误"}`),e}},enabled:a}),C=(0,x.D)({mutationFn:g.ot,onSuccess:()=>{v.invalidateQueries({queryKey:["routes"]}),tm.Am.success("创建成功"),w()},onError:e=>{tm.Am.error("创建失败: "+e.message)}}),E=(0,x.D)({mutationFn:e=>(0,g.fq)(e,{}),onSuccess:()=>{v.invalidateQueries({queryKey:["routes"]}),tm.Am.success("更新成功"),w()},onError:e=>{tm.Am.error("更新失败: "+e.message)}}),I=(0,x.D)({mutationFn:g.qW,onSuccess:()=>{v.invalidateQueries({queryKey:["routes"]}),tm.Am.success("删除成功")},onError:e=>{tm.Am.error("删除失败: "+e.message)}}),O=(0,x.D)({mutationFn:g.rr,onSuccess:()=>{v.invalidateQueries({queryKey:["routes"]}),tm.Am.success("状态更新成功")},onError:e=>{tm.Am.error("状态更新失败: "+e.message)}}),P=async e=>{F?await E.mutateAsync(F.id):await C.mutateAsync(e)},T=e=>{k(e),j()},M=async e=>{confirm("确定要删除该路由吗？")&&await I.mutateAsync(e.id)},L=async e=>{await O.mutateAsync(e.id)},R=e=>{k(e),A()},q=[...S,{header:"创建者",accessorKey:"user.username"}],z=[...S,{header:"所属家庭",accessorKey:"family.name"},{header:"创建者",accessorKey:"user.username"}],B=e=>e.map(e=>({...e,onEdit:T,onDelete:M,onToggleActive:L,onViewStats:R}));return a?(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"路由管理"}),s.jsx(n.A,{color:"primary",endContent:s.jsx(f.Z,{className:"w-4 h-4"}),onPress:()=>{k(void 0),j()},children:"新增路由"})]}),(0,s.jsxs)(o.n,{"aria-label":"路由类型",children:[s.jsx(d.r,{title:"个人路由",children:s.jsx(u.w,{children:s.jsx(c.G,{children:s.jsx(p.w,{columns:q,data:B(N?.data?.personalRoutes||[]),isLoading:D,pagination:!0})})})},"personal"),s.jsx(d.r,{title:"家庭路由",children:s.jsx(u.w,{children:s.jsx(c.G,{children:s.jsx(p.w,{columns:z,data:B(N?.data?.familyRoutes||[]),isLoading:D,pagination:!0})})})},"family")]}),s.jsx(e8,{isOpen:b,onClose:w,onSubmit:P,initialData:F}),s.jsx(tf,{isOpen:_,onClose:V,route:F})]}):(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"无权访问"}),s.jsx("p",{children:"只有管理员可以访问此页面"})]})}},87265:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(95344),a=r(3729),i=r(91529);let l=({variant:e="default"})=>{let t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!t.current)return;let r=t.current,s=r.getContext("2d");if(!s)return;let a=()=>{r.width=window.innerWidth,r.height=window.innerHeight};a(),window.addEventListener("resize",a);let i=[],l="minimal"===e?50:100;class n{constructor(){this.x=Math.random()*r.width,this.y=Math.random()*r.height,this.size=2*Math.random()+.5,this.speedX=.5*Math.random()-.25,this.speedY=.5*Math.random()-.25,this.color=`hsla(${60*Math.random()+200}, 70%, 60%, ${.8*Math.random()+.2})`}update(){this.x+=this.speedX,this.y+=this.speedY,this.x>r.width?this.x=0:this.x<0&&(this.x=r.width),this.y>r.height?this.y=0:this.y<0&&(this.y=r.height)}draw(){s&&(s.fillStyle=this.color,s.beginPath(),s.arc(this.x,this.y,this.size,0,2*Math.PI),s.fill())}}let o=()=>{if(s)for(let e=0;e<i.length;e++)for(let t=e;t<i.length;t++){let r=i[e].x-i[t].x,a=i[e].y-i[t].y,l=Math.sqrt(r*r+a*a);if(l<150){let r=1-l/150;s.strokeStyle=`rgba(150, 150, 255, ${.15*r})`,s.lineWidth=.8,s.beginPath(),s.moveTo(i[e].x,i[e].y),s.lineTo(i[t].x,i[t].y),s.stroke()}}},d=()=>{if(s){for(let t of(s.clearRect(0,0,r.width,r.height),"default"===e&&u(),i))t.update(),t.draw();o(),requestAnimationFrame(d)}},u=()=>{if(!s)return;s.strokeStyle="rgba(100, 100, 255, 0.1)",s.beginPath(),s.lineWidth=1.5,s.arc(0,0,200,0,.5*Math.PI),s.stroke(),s.beginPath(),s.arc(r.width,r.height,250,Math.PI,1.5*Math.PI),s.stroke(),s.beginPath(),s.lineWidth=.8;let e=r.width/2,t=r.height/2,a=.4*Math.min(r.width,r.height);s.moveTo(e-a/2,t-a/2),s.lineTo(e+a/2,t-a/2),s.lineTo(e+a/2,t+a/2),s.lineTo(e-a/2,t+a/2),s.lineTo(e-a/2,t-a/2),s.stroke()};return(()=>{for(let e=0;e<l;e++)i.push(new n)})(),d(),()=>{window.removeEventListener("resize",a)}},[e]),(0,s.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[s.jsx("canvas",{ref:t,className:"absolute inset-0 w-full h-full"}),s.jsx("div",{className:"absolute top-0 -left-[10%] w-[50%] h-[50%] bg-primary/10 rounded-full blur-[150px] -z-10"}),s.jsx("div",{className:"absolute bottom-[10%] right-[10%] w-[40%] h-[40%] bg-secondary/10 rounded-full blur-[150px] -z-10"}),s.jsx(i.E.div,{className:"absolute top-[20%] right-[10%] w-16 h-16 border border-primary/20 rounded-full",animate:{y:[0,15,0],opacity:[.6,.9,.6],scale:[1,1.05,1]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),s.jsx(i.E.div,{className:"absolute top-[10%] left-[20%] w-24 h-24 border border-secondary/30 rounded-xl rotate-45",animate:{y:[0,-20,0],opacity:[.3,.6,.3],rotate:[45,35,45]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),s.jsx(i.E.div,{className:"absolute bottom-[30%] left-[5%] w-20 h-20 bg-gradient-to-tr from-primary/5 to-secondary/5 rounded-lg",animate:{x:[0,10,0],opacity:[.4,.7,.4],rotate:[0,10,0]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]})}},40005:(e,t,r)=>{"use strict";r.d(t,{w:()=>h});var s=r(95344),a=r(3729),i=r.n(a),l=r(98400),n=r(12873),o=r(20516),d=r(61387),u=r(3394),c=r(84752),f=r(52914),m=r(1629);function h({columns:e,data:t,isLoading:r=!1,pagination:a=!1,pageSize:h=10}){let[y,x]=i().useState(1),g=Math.ceil(t.length/h),p=i().useMemo(()=>{let e=(y-1)*h,r=e+h;return t.slice(e,r)},[y,t,h]),v=i().useCallback((t,r)=>{let s=e.find(e=>e.accessorKey===r);return s?.cell?s.cell({row:{original:t}}):t[r]},[e]);return s.jsx("div",{className:"w-full",children:(0,s.jsxs)(l.b,{"aria-label":"数据表格",bottomContent:a&&g>1?s.jsx("div",{className:"flex w-full justify-center",children:s.jsx(n.g,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:y,total:g,onChange:x})}):null,children:[s.jsx(o.J,{children:e.map((e,t)=>s.jsx(d.j,{children:e.header},e.accessorKey||`column-${t}`))}),s.jsx(u.y,{items:p,loadingContent:s.jsx(c.c,{}),isLoading:r,emptyContent:r?null:"暂无数据",children:t=>s.jsx(f.g,{children:e.map(e=>s.jsx(m.X,{children:v(t,e.accessorKey)},e.accessorKey))},t.id)})]})})}},41575:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(95344),a=r(87265);let i={lg:"max-w-5xl",xl:"max-w-7xl",full:"w-full max-w-none"},l={sm:"py-6",md:"py-10",lg:"py-16"},n=function({title:e,description:t,actions:r,children:n,backgroundVariant:o="minimal",maxWidth:d="xl",padding:u="md",contentClassName:c="",headerClassName:f=""}){let m=["relative","mx-auto","w-full","px-4",i[d],l[u],c].filter(Boolean).join(" "),h=e||t||r;return(0,s.jsxs)("main",{className:"relative min-h-screen overflow-hidden",children:["none"!==o&&s.jsx(a.Z,{variant:"default"===o?"default":"minimal"}),(0,s.jsxs)("div",{className:m,children:[h&&(0,s.jsxs)("div",{className:["mb-8","flex flex-col gap-4","sm:flex-row sm:items-center sm:justify-between",f].filter(Boolean).join(" "),children:[(0,s.jsxs)("div",{className:"space-y-1",children:[e&&s.jsx("h1",{className:"text-2xl font-bold md:text-3xl",children:e}),t&&s.jsx("p",{className:"max-w-2xl text-base text-default-500 md:text-lg",children:t})]}),r&&s.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:r})]}),s.jsx("div",{className:"relative z-10",children:n})]})]})}},95396:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r(95344),a=r(3729),i=r.n(a),l=r(8428),n=r(30853),o=r(84752);function d({children:e,requiredRole:t}){let r=(0,l.useRouter)(),{user:d,isLoading:u}=(0,n.useAuth)(),[c,f]=i().useState(!0);return((0,a.useEffect)(()=>{let e=setTimeout(()=>{if(f(!1),!u&&!d){r.push("/auth/login");return}t&&d&&d.role!==t&&"owner"!==d.role&&r.push("/dashboard")},500);return()=>clearTimeout(e)},[d,u,r,t]),u||c)?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:s.jsx(o.c,{size:"lg"})}):!d||t&&d.role!==t&&"owner"!==d.role?null:s.jsx(s.Fragment,{children:e})}},37384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/layout.tsx`),{__esModule:a,$$typeof:i}=s,l=s.default},16201:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/routes/layout.tsx`),{__esModule:a,$$typeof:i}=s,l=s.default},58282:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/routes/page.tsx`),{__esModule:a,$$typeof:i}=s,l=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3715,1529,8974,7279,7721,7791,1327,9799,5261,3729,6536,6250,1271,7390,3751,8275,5019,492,2873,3442,9760,7048,4037],()=>r(25935));module.exports=s})();