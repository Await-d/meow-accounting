(()=>{var e={};e.id=8953,e.ids=[8953],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86794:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=t(50482),n=t(69108),i=t(62563),r=t.n(i),l=t(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["settings",{children:["system",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,80275)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/system/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,37384)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,66053)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,24117)),"/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/system/page.tsx"],m="/settings/system/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/settings/system/page",pathname:"/settings/system",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27661:(e,s,t)=>{Promise.resolve().then(t.bind(t,70366))},4332:(e,s,t)=>{Promise.resolve().then(t.bind(t,9453))},31498:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(97075).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},70366:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(95344);t(3729);var n=t(8428),i=t(56506),r=t(56686),l=t(2273),o=t(89895),c=t(54052),d=t(99046),m=t(37121),x=t(23485),u=t(13746),h=t(91529);let g=[{name:"系统设置",href:"/settings/system",icon:a.jsx(l.Z,{size:20})},{name:"用户管理",href:"/settings/users",icon:a.jsx(o.Z,{size:20})},{name:"家庭管理",href:"/settings/family",icon:a.jsx(c.Z,{size:20})},{name:"分类管理",href:"/settings/category",icon:a.jsx(d.Z,{size:20})},{name:"系统日志",href:"/settings/logs",icon:a.jsx(m.Z,{size:20})},{name:"备份恢复",href:"/settings/backup",icon:a.jsx(x.Z,{size:20})}];function p({children:e}){let s=(0,n.usePathname)();return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-default-100",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)(r.w,{className:"w-64 h-fit p-2 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 mb-2",children:[a.jsx(h.E.div,{animate:{rotate:[0,15,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:a.jsx(u.Z,{size:24,className:"text-primary"})}),a.jsx("h2",{className:"text-xl font-bold",children:"后台管理"})]}),a.jsx("nav",{children:g.map(e=>{let t=s===e.href;return(0,a.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t?"bg-primary text-white":"hover:bg-default-100"}`,children:[e.icon,a.jsx("span",{children:e.name})]},e.href)})})]}),a.jsx(r.w,{className:"flex-1 p-6",children:e})]})})})}},9453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95344),n=t(3729),i=t.n(n),r=t(84752),l=t(44738),o=t(56686),c=t(87055),d=t(40237),m=t(41931),x=t(16),u=t(44360),h=t(3635),g=t(4521),p=t(31498),f=t(13746),j=t(97075);let v=(0,j.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),y=(0,j.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),N=(0,j.Z)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var b=t(23485),w=t(81271),z=t(31296),S=t(34755),k=t(29709);let M=k.z.object({siteName:k.z.string().min(1,"站点名称不能为空").max(50,"站点名称不能超过50个字符"),siteDescription:k.z.string().max(200,"站点描述不能超过200个字符"),adminEmail:k.z.string().email("请输入有效的邮箱地址"),language:k.z.string(),timezone:k.z.string(),enableRegistration:k.z.boolean(),enableEmailNotification:k.z.boolean(),enableSMSNotification:k.z.boolean(),maxLoginAttempts:k.z.number().min(1,"最小值为1").max(10,"最大值为10"),sessionTimeout:k.z.number().min(5,"最小值为5分钟").max(1440,"最大值为24小时"),maintenanceMode:k.z.boolean()});function C(){let[e,s]=i().useState({siteName:"喵呜记账",siteDescription:"简单易用的个人和家庭记账系统",adminEmail:"admin@example.com",language:"zh-CN",timezone:"Asia/Shanghai",enableRegistration:!0,enableEmailNotification:!0,enableSMSNotification:!1,maxLoginAttempts:5,sessionTimeout:30,maintenanceMode:!1}),[t,n]=i().useState({}),{isLoading:j}=(0,w.a)({queryKey:["systemSettings"],queryFn:async()=>{try{let e=await fetch("/api/settings/system",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw Error("获取系统设置失败");return await e.json()}catch(e){throw S.Am.error("获取系统设置失败"),e}}}),{mutate:C,isPending:E}=(0,z.D)({mutationFn:async e=>{let s=await fetch("/api/settings/system",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).error||"保存系统设置失败");return await s.json()},onSuccess:()=>{S.Am.success("设置保存成功")},onError:e=>{S.Am.error(`设置保存失败: ${e.message}`)}}),P=async()=>{try{let s=M.parse(e);n({}),C(s)}catch(e){if(e instanceof k.z.ZodError){let s={};e.errors.forEach(e=>{e.path[0]&&(s[e.path[0]]=e.message)}),n(s),S.Am.error("请检查输入内容")}}},A=(e,a)=>{s(s=>({...s,[e]:a})),t[e]&&n(s=>({...s,[e]:void 0}))};return j?a.jsx("div",{className:"flex justify-center items-center h-[50vh]",children:a.jsx(r.c,{size:"lg",label:"加载中..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"系统设置"}),a.jsx(l.A,{color:"primary",variant:"shadow",onPress:P,isLoading:E,startContent:a.jsx(p.Z,{size:16}),children:"保存更改"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(o.w,{className:"p-4",children:[(0,a.jsxs)(c.u,{className:"flex gap-3",children:[a.jsx(f.Z,{size:24,className:"text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"基本设置"}),a.jsx("p",{className:"text-sm text-default-500",children:"配置系统的基本信息"})]})]}),(0,a.jsxs)(d.G,{className:"space-y-4",children:[a.jsx(m.Y,{label:"站点名称",value:e.siteName,onChange:e=>A("siteName",e.target.value),errorMessage:t.siteName,isInvalid:!!t.siteName}),a.jsx(m.Y,{label:"站点描述",value:e.siteDescription,onChange:e=>A("siteDescription",e.target.value),errorMessage:t.siteDescription,isInvalid:!!t.siteDescription}),a.jsx(m.Y,{label:"管理员邮箱",value:e.adminEmail,onChange:e=>A("adminEmail",e.target.value),errorMessage:t.adminEmail,isInvalid:!!t.adminEmail,startContent:a.jsx(v,{size:16})})]})]}),(0,a.jsxs)(o.w,{className:"p-4",children:[(0,a.jsxs)(c.u,{className:"flex gap-3",children:[a.jsx(y,{size:24,className:"text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"本地化设置"}),a.jsx("p",{className:"text-sm text-default-500",children:"配置系统的语言和时区"})]})]}),(0,a.jsxs)(d.G,{className:"space-y-4",children:[a.jsx(x.g,{label:"系统语言",selectedKeys:[e.language],onChange:e=>A("language",e.target.value),errorMessage:t.language,isInvalid:!!t.language,children:[{label:"简体中文",value:"zh-CN"},{label:"繁體中文",value:"zh-TW"},{label:"English",value:"en-US"}].map(e=>a.jsx(u.R,{value:e.value,children:e.label},e.value))}),a.jsx(x.g,{label:"系统时区",selectedKeys:[e.timezone],onChange:e=>A("timezone",e.target.value),errorMessage:t.timezone,isInvalid:!!t.timezone,children:[{label:"北京时间 (UTC+8)",value:"Asia/Shanghai"},{label:"东京时间 (UTC+9)",value:"Asia/Tokyo"},{label:"纽约时间 (UTC-5)",value:"America/New_York"}].map(e=>a.jsx(u.R,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)(o.w,{className:"p-4",children:[(0,a.jsxs)(c.u,{className:"flex gap-3",children:[a.jsx(N,{size:24,className:"text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"通知设置"}),a.jsx("p",{className:"text-sm text-default-500",children:"配置系统的通知方式"})]})]}),(0,a.jsxs)(d.G,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"邮件通知"}),a.jsx("p",{className:"text-xs text-default-500",children:"启用系统邮件通知功能"})]}),a.jsx(h.i,{isSelected:e.enableEmailNotification,onValueChange:e=>A("enableEmailNotification",e)})]}),a.jsx(g.j,{}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"短信通知"}),a.jsx("p",{className:"text-xs text-default-500",children:"启用系统短信通知功能"})]}),a.jsx(h.i,{isSelected:e.enableSMSNotification,onValueChange:e=>A("enableSMSNotification",e)})]})]})]}),(0,a.jsxs)(o.w,{className:"p-4",children:[(0,a.jsxs)(c.u,{className:"flex gap-3",children:[a.jsx(b.Z,{size:24,className:"text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"安全设置"}),a.jsx("p",{className:"text-sm text-default-500",children:"配置系统的安全相关选项"})]})]}),(0,a.jsxs)(d.G,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"开放注册"}),a.jsx("p",{className:"text-xs text-default-500",children:"允许新用户注册账号"})]}),a.jsx(h.i,{isSelected:e.enableRegistration,onValueChange:e=>A("enableRegistration",e)})]}),a.jsx(g.j,{}),a.jsx(m.Y,{type:"number",label:"最大登录尝试次数",value:e.maxLoginAttempts.toString(),onChange:e=>A("maxLoginAttempts",parseInt(e.target.value)),errorMessage:t.maxLoginAttempts,isInvalid:!!t.maxLoginAttempts,description:"超过此次数将暂时锁定账号"}),a.jsx(m.Y,{type:"number",label:"会话超时时间（分钟）",value:e.sessionTimeout.toString(),onChange:e=>A("sessionTimeout",parseInt(e.target.value)),errorMessage:t.sessionTimeout,isInvalid:!!t.sessionTimeout,description:"用户无操作后自动退出登录的时间"})]})]}),(0,a.jsxs)(o.w,{className:"p-4",children:[(0,a.jsxs)(c.u,{className:"flex gap-3",children:[a.jsx(f.Z,{size:24,className:"text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"维护模式"}),a.jsx("p",{className:"text-sm text-default-500",children:"系统维护相关设置"})]})]}),a.jsx(d.G,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"维护模式"}),a.jsx("p",{className:"text-xs text-default-500",children:"启用后仅管理员可访问系统"})]}),a.jsx(h.i,{isSelected:e.maintenanceMode,onValueChange:e=>A("maintenanceMode",e),color:"danger"})]})})]})]})]})}},37384:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>r});let a=(0,t(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/layout.tsx`),{__esModule:n,$$typeof:i}=a,r=a.default},80275:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>r});let a=(0,t(86843).createProxy)(String.raw`/home/runner/work/meow-accounting/meow-accounting/frontend/src/app/settings/system/page.tsx`),{__esModule:n,$$typeof:i}=a,r=a.default},87055:(e,s,t)=>{"use strict";t.d(s,{u:()=>c});var a=t(92580),n=t(36279),i=t(52401),r=t(90386),l=t(95344),o=(0,n.Gp)((e,s)=>{var t;let{as:n,className:o,children:c,...d}=e,m=(0,i.gy)(s),{slots:x,classNames:u}=(0,a.R)(),h=(0,r.W)(null==u?void 0:u.header,o);return(0,l.jsx)(n||"div",{ref:m,className:null==(t=x.header)?void 0:t.call(x,{class:h}),...d,children:c})});o.displayName="NextUI.CardHeader";var c=o},18012:(e,s,t)=>{"use strict";t.d(s,{l:()=>n});var a=t(51410);function n(...e){return s=>{e.forEach(e=>(function(e,s){if(null!=e){if((0,a.mf)(e)){e(s);return}try{e.current=s}catch(t){throw Error(`Cannot assign value '${s}' to ref '${e}'`)}}})(e,s))}}},29703:(e,s,t)=>{"use strict";t.d(s,{l:()=>n});var a=t(49810);function n(e={}){let{isReadOnly:s}=e,[t,n]=(0,a.z)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:t,setSelected:function(e){s||n(e)},toggle:function(){s||n(!t)}}}},63701:(e,s,t)=>{"use strict";function a(e,s){return"function"==typeof e?e(...s):!!e}function n(){}t.d(s,{L:()=>a,Z:()=>n})}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[3715,1599,8974,7279,7721,352,1327,9799,5261,6536,6250,1271,492,7048,4037],()=>t(86794));module.exports=a})();