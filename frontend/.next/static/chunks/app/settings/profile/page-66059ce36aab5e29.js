(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9671],{83164:function(e,a,t){Promise.resolve().then(t.bind(t,85307))},47907:function(e,a,t){"use strict";var r=t(15313);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},85307:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var r=t(3827),s=t(64090),n=t(67945),c=t(73031),l=t(26856),i=t(51055),o=t(47385),d=t(56178),u=t(14078),h=t(10732),m=t(52131),p=t(63121),f=t(41310);function v(){let{user:e,updateSettings:a}=(0,m.useAuth)(),{userRoutes:t,familyRoutes:v}=(0,p.useRoute)(),{showToast:y}=(0,f.p)(),[x,b]=(0,s.useState)({privacy_mode:(null==e?void 0:e.privacy_mode)||!1,default_route:(null==e?void 0:e.default_route)||"/dashboard",currentFamilyId:null==e?void 0:e.currentFamilyId}),j=async()=>{try{await a(x),y("设置更新成功","success")}catch(e){y("设置更新失败","error")}};return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(n.w,{children:[(0,r.jsx)(c.u,{children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"个人设置"})}),(0,r.jsx)(l.j,{}),(0,r.jsxs)(i.G,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"基本信息"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(o.Y,{label:"用户名",value:(null==e?void 0:e.username)||"",isReadOnly:!0}),(0,r.jsx)(o.Y,{label:"邮箱",value:(null==e?void 0:e.email)||"",isReadOnly:!0})]})]}),(0,r.jsx)(l.j,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"偏好设置"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d.g,{label:"默认路由",placeholder:"选择默认路由",selectedKeys:[x.default_route],onChange:e=>b({...x,default_route:e.target.value}),children:(()=>{let e=[{key:"/dashboard",label:"仪表盘"}];return null==t||t.forEach(a=>{a.is_active&&e.push({key:a.path,label:"个人 - ".concat(a.name)})}),null==v||v.forEach(a=>{a.is_active&&e.push({key:a.path,label:"家庭 - ".concat(a.name)})}),e})().map(e=>(0,r.jsx)(u.R,{value:e.key,children:e.label},e.key))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"privacy_mode",checked:x.privacy_mode,onChange:e=>b({...x,privacy_mode:e.target.checked}),className:"w-4 h-4"}),(0,r.jsx)("label",{htmlFor:"privacy_mode",children:"隐私模式"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(h.A,{color:"primary",onPress:j,children:"保存设置"})})]})]})})}},73031:function(e,a,t){"use strict";t.d(a,{u:function(){return o}});var r=t(32281),s=t(84449),n=t(72874),c=t(5142),l=t(3827),i=(0,s.Gp)((e,a)=>{var t;let{as:s,className:i,children:o,...d}=e,u=(0,n.gy)(a),{slots:h,classNames:m}=(0,r.R)(),p=(0,c.W)(null==m?void 0:m.header,i);return(0,l.jsx)(s||"div",{ref:u,className:null==(t=h.header)?void 0:t.call(h,{class:p}),...d,children:o})});i.displayName="NextUI.CardHeader";var o=i},37963:function(e,a,t){"use strict";t.d(a,{o:function(){return s}});class r extends Error{}function s(e,a){let t;if("string"!=typeof e)throw new r("Invalid token specified: must be a string");a||(a={});let s=!0===a.header?0:1,n=e.split(".")[s];if("string"!=typeof n)throw new r("Invalid token specified: missing part #".concat(s+1));try{t=function(e){let a=e.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw Error("base64 string is not of the correct length")}try{var t;return t=a,decodeURIComponent(atob(t).replace(/(.)/g,(e,a)=>{let t=a.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}catch(e){return atob(a)}}(n)}catch(e){throw new r("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(e.message,")"))}try{return JSON.parse(t)}catch(e){throw new r("Invalid token specified: invalid json for part #".concat(s+1," (").concat(e.message,")"))}}r.prototype.name="InvalidTokenError"}},function(e){e.O(0,[6034,9390,9689,7945,7530,2178,5784,7385,6288,4187,1945,8704,4322,5961,2131,3121,2971,8069,1744],function(){return e(e.s=83164)}),_N_E=e.O()}]);